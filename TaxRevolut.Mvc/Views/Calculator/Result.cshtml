@using System.Globalization
@model ResultViewModel
@{
    ViewData["Title"] = "Results";
    var us = new CultureInfo("en-US");
    var fr = new CultureInfo("fr-FR");
    const double dummy = 999.99d;
}

<h3 class="mt-5">📈 Results in $</h3>
<table class="table">
    <tr>
        <th scope="col">Year</th>
        <th scope="col">Gains</th>
        <th scope="col">CashTopUp</th>
        <th scope="col">Dividends</th>
        <th scope="col">CustodyFee</th>
    </tr>
    @foreach (var annualReport in Model.AnnualReports)
    {
        @if (annualReport.Year >= DateTime.Today.Year - 1)
        {
            <tr>
                <td>@annualReport.Year</td>
                <td class="blurry-text">@dummy.ToString("C", us)</td>
                <td class="blurry-text">@dummy.ToString("C", us)</td>
                <td class="blurry-text">@dummy.ToString("C", us)</td>
                <td class="blurry-text">@dummy.ToString("C", us)</td>
            </tr>
        }
        else
        {
            <tr>
                <td>@annualReport.Year</td>
                <td>@annualReport.Gains.ToString("C", us)</td>
                <td>@annualReport.CashTopUp.ToString("C", us)</td>
                <td>@annualReport.Dividends.ToString("C", us)</td>
                <td>@annualReport.CustodyFee.ToString("C", us)</td>
            </tr>
        }
    }
</table>

<h3 class="mt-5">📈 Results in €</h3>
<table class="table">
    <tr>
        <th scope="col">Year</th>
        <th scope="col">Gains</th>
        <th scope="col">CashTopUp</th>
        <th scope="col">Dividends</th>
        <th scope="col">CustodyFee</th>
    </tr>
    @foreach (var annualReport in Model.AnnualReports)
    {
        @if (annualReport.Year >= DateTime.Today.Year - 1)
        {
            <tr>
                <td>@annualReport.Year</td>
                <td class="blurry-text">@dummy.ToString("C", fr)</td>
                <td class="blurry-text">@dummy.ToString("C", fr)</td>
                <td class="blurry-text">@dummy.ToString("C", fr)</td>
                <td class="blurry-text">@dummy.ToString("C", fr)</td>
            </tr>
        }
        else
        {
            <tr>
                <td>@annualReport.Year</td>
                <td>@annualReport.GainsInEuro.ToString("C", fr)</td>
                <td>@annualReport.CashTopUpInEuro.ToString("C", fr)</td>
                <td>@annualReport.DividendsInEuro.ToString("C", fr)</td>
                <td>@annualReport.CustodyFeeInEuro.ToString("C", fr)</td>
            </tr>
        }
    }
</table>

<p class="m-5 lead text-center">Do you wish to get your gains for @(DateTime.Today.Year - 1), the current fiscal year? Then, you can use the form below and support me by donating.</p>

@using (Html.BeginForm("Donate", "Calculator", FormMethod.Post, new { enctype = "multipart/form-data"}))
{
    <div class="mb-3">
        <label for="formFile" class="form-label">Your Revolut export file (.csv)</label>
        <input class="form-control" type="file" name="formFile" id="formFile" required>
    </div>
    <button type="submit" class="btn btn-lg btn-primary" onclick="window.open('https://buymeacoffee.com/ulyssetassidis', '_blank')">☕ Buy me a coffee and 💸 see results</button>
}